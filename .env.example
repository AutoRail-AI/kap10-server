# ============================================
# Kap10 Web Server - Environment Variables
# ============================================
# Copy this file to .env.local and fill in your values
#   cp .env.example .env.local
#
# DO NOT commit .env.local to version control.
# For Docker: docker compose up
#
# Required for Phase 0 (minimal): SUPABASE_*, BETTER_AUTH_*, SUPABASE_DB_URL.
# For full Phase 0 (health + org bootstrap): also REDIS_URL, ARANGODB_*, TEMPORAL_ADDRESS.
# OAuth, AI, Stripe, PostHog, Sentry, etc. are optional.

# ============================================
# Database (Supabase)
# ============================================
# Supabase project URL
# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://your-project.supabase.co

# Supabase service role key (server-side only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase secret key (alias for service role key)
SUPABASE_SECRET_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase direct database URL (PostgreSQL connection string)
# Used by Better Auth for direct pg Pool connection
# Format: postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres

# Public Supabase keys (safe to expose to browser)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ============================================
# Redis (Cache & Rate Limits)
# ============================================
# Redis connection URL for caching and rate limiting
# Format: redis://host:port or redis://username:password@host:port
# Local: redis://localhost:6379
# Docker Compose: redis://redis:6379
REDIS_URL=redis://localhost:6379

# ============================================
# ArangoDB (Graph Store)
# ============================================
# ArangoDB connection URL (API + web UI)
# Local: http://localhost:8529 | Docker: http://arangodb:8529
ARANGODB_URL=http://localhost:8529
# Database name (single pool-based multi-tenant DB)
ARANGODB_DATABASE=kap10_db
# Root password (must match docker-compose ARANGO_ROOT_PASSWORD if using Docker)
ARANGO_ROOT_PASSWORD=changeme

# ============================================
# Temporal (Workflow Orchestration)
# ============================================
# Temporal server gRPC address
# Local: localhost:7233 | Docker (from host): localhost:7233 | From app container: temporal:7233
TEMPORAL_ADDRESS=localhost:7233

# ============================================
# Langfuse (LLM Observability - Optional)
# ============================================
# Get from: https://cloud.langfuse.com or self-hosted
# LANGFUSE_SECRET_KEY=
# LANGFUSE_PUBLIC_KEY=
# LANGFUSE_BASEURL=https://cloud.langfuse.com

# ============================================
# Better Auth Configuration
# ============================================
# Secret key for Better Auth (REQUIRED - minimum 32 characters)
# Generate a secure random string: openssl rand -base64 32
BETTER_AUTH_SECRET=your-secret-key-minimum-32-characters-long-change-this

# Base URL for your application (REQUIRED)
# Development: http://localhost:3000
# Production: https://yourdomain.com
BETTER_AUTH_URL=http://localhost:3000

# ============================================
# GitHub OAuth (Optional - Better Auth)
# ============================================
# Create OAuth App: https://github.com/settings/developers
# Authorization callback URL: {BETTER_AUTH_URL}/api/auth/callback/github
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret

# ============================================
# Google OAuth (Optional)
# ============================================
# Get these from Google Cloud Console:
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================
# Email Configuration (Resend)
# ============================================
# Resend API key for sending emails
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key

# From email address for transactional emails
# Must be verified in your Resend account
EMAIL_FROM=AppealGen AI <noreply@appealgen.ai>

# ============================================
# File Uploads (Uploadthing)
# ============================================
# Uploadthing API token for file uploads
# Get from: https://uploadthing.com/dashboard
UPLOADTHING_TOKEN=sk_live_your_uploadthing_token

# ============================================
# AI Agent Configuration (Optional)
# ============================================
# OpenAI API key for AI agent features
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# Anthropic API key for Claude AI features
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# Tavily API key for web search functionality
# Get from: https://tavily.com/
TAVILY_API_KEY=tvly-your-tavily-api-key

# ============================================
# Organization Settings (Optional)
# ============================================
# Maximum number of organizations a user can create (default: 5)
ORGANIZATION_LIMIT=5

# Maximum number of members per organization (default: 100)
MEMBERSHIP_LIMIT=100

# ============================================
# Stripe Billing (Optional)
# ============================================
# Stripe secret key for payment processing
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe webhook secret for verifying webhook signatures
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Price IDs for subscription tiers
# Create products and prices in Stripe Dashboard
STRIPE_PRICE_ID_FREE=price_your_free_tier_price_id
STRIPE_PRICE_ID_PRO=price_your_pro_tier_price_id
STRIPE_PRICE_ID_ENTERPRISE=price_your_enterprise_tier_price_id

# ============================================
# PostHog Analytics (Optional)
# ============================================
# PostHog project API key
# Get from: https://app.posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY=phc_your_posthog_key

# PostHog host URL
# Self-hosted: https://your-posthog-instance.com
# Cloud: https://app.posthog.com
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ============================================
# Sentry Error Tracking (Optional)
# ============================================
# Sentry DSN for error tracking
# Get from: https://sentry.io/settings/projects/your-project/keys/
SENTRY_DSN=https://your-sentry-dsn@sentry.io/your-project-id

# Sentry auth token for releases and source maps
# Get from: https://sentry.io/settings/account/api/auth-tokens/
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# ============================================
# Feature Flags (Optional)
# ============================================
# Enable feature flags system (true/false)
FEATURE_FLAGS_ENABLED=false

# ============================================
# Public Environment Variables
# ============================================
# Public app URL (used for client-side redirects, etc.)
# Development: http://localhost:3000
# Production: https://yourdomain.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# Build & Development
# ============================================
# Enable bundle analysis (true/false)
# When true, runs @next/bundle-analyzer after build
ANALYZE=false

# ============================================
# Notes
# ============================================
# 1. Never commit .env.local to version control
# 2. All variables marked as optional can be omitted for basic functionality
# 3. Required variables for production:
#    - SUPABASE_URL, SUPABASE_SECRET_KEY, SUPABASE_DB_URL
#    - BETTER_AUTH_SECRET (min 32 chars)
#    - BETTER_AUTH_URL
# 4. For local development with Supabase:
#    - Use Supabase CLI: supabase start (runs local instance)
#    - Or connect to a Supabase cloud project
# 5. Generate BETTER_AUTH_SECRET: openssl rand -base64 32
