@import 'tailwindcss';

/* ============================================================================
   kap10 server Design System
   Tailwind CSS v4 + shadcn/ui compatible
   Theme: Void Black + Rail Purple (Glass Brain Aesthetic)
   See: docs/brand/brand.md

   PRIMARY UI PALETTE (enterprise)
   -------------------------------
   Use only a couple of colors so the website looks professional and
   enterprise-grade:
   - BACKGROUND: Void Black (#0A0A0F) always.
   - FONTS & COMPONENTS: Rail Purple (#6E18B3) or Electric Cyan (#00E5FF) only.
   - TEXT: Cloud White (#FAFAFA) for primary text; muted for metadata.
   Do not introduce extra accent colors; semantic colors (success/warning/error)
   are for forms/alerts only.
   ============================================================================ */

@theme {
  /* ==========================================================================
     Color Primitives
     ========================================================================== */
  --color-void-black: #0A0A0F;
  --color-slate-grey: #1E1E28;
  --color-cloud-white: #FAFAFA;
  --color-pure-white: #FFFFFF;
  --color-obsidian: #050507; /* Darker background for depth */

  /* ==========================================================================
     Brand Colors — UI accents: Rail Purple + Electric Cyan only (see brand.md)
     ========================================================================== */
  --color-rail-purple: #6E18B3;
  --color-quantum-violet: #8134CE; /* Only inside rail gradient, not standalone */
  --color-deep-purple: #5B0B96;
  --color-electric-cyan: #00E5FF;
  --color-neon-blue: #00E5FF; /* Alias to Electric Cyan for active states */

  /* ==========================================================================
     Status Colors (semantic only; prefer cyan/purple in UI)
     ========================================================================== */
  --color-success: #00FF88;
  --color-warning: #FFB800;
  --color-error: #FF3366;
  --color-info: var(--color-electric-cyan);

  /* ==========================================================================
     shadcn/ui Semantic Colors (void black + rail purple + electric cyan)
     ========================================================================== */
  --color-background: var(--color-void-black);
  --color-foreground: var(--color-cloud-white);

  --color-card: rgba(30, 30, 40, 0.4); /* Glass effect base */
  --color-card-foreground: var(--color-cloud-white);

  --color-popover: var(--color-void-black);
  --color-popover-foreground: var(--color-cloud-white);

  --color-primary: var(--color-rail-purple);
  --color-primary-foreground: var(--color-pure-white);

  --color-secondary: var(--color-void-black);
  --color-secondary-foreground: var(--color-cloud-white);

  --color-muted: rgba(10, 10, 15, 0.6);
  --color-muted-foreground: rgba(250, 250, 250, 0.6);

  --color-accent: var(--color-electric-cyan);
  --color-accent-foreground: var(--color-void-black);

  --color-destructive: var(--color-error);
  --color-destructive-foreground: var(--color-pure-white);

  --color-border: rgba(250, 250, 250, 0.1);
  --color-input: rgba(250, 250, 250, 0.15);
  --color-ring: var(--color-electric-cyan);

  /* Chart colors (rail purple + electric cyan) */
  --color-chart-1: var(--color-rail-purple);
  --color-chart-2: var(--color-electric-cyan);
  --color-chart-3: var(--color-rail-purple);
  --color-chart-4: var(--color-electric-cyan);
  --color-chart-5: var(--color-rail-purple);

  /* Sidebar */
  --color-sidebar: var(--color-void-black);
  --color-sidebar-foreground: var(--color-cloud-white);
  --color-sidebar-primary: var(--color-rail-purple);
  --color-sidebar-primary-foreground: var(--color-pure-white);
  --color-sidebar-accent: #0E0E14;
  --color-sidebar-accent-foreground: var(--color-cloud-white);
  --color-sidebar-border: rgba(250, 250, 250, 0.08);
  --color-sidebar-ring: var(--color-electric-cyan);

  /* ==========================================================================
     Font Families (Tailwind v4: --font-* creates font-* utility)
     ========================================================================== */
  --font-grotesk: var(--font-space-grotesk), 'Space Grotesk', sans-serif;
  --font-sans: var(--font-inter-var), 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: var(--font-jetbrains), 'JetBrains Mono', 'Fira Code', monospace;

  /* ==========================================================================
     Border Radius
     ========================================================================== */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* ==========================================================================
     Spacing
     ========================================================================== */
  --spacing-18: 4.5rem;
  --spacing-22: 5.5rem;

  /* ==========================================================================
     Animations
     ========================================================================== */
  --animate-fade-in: fade-in 0.5s ease-out;
  --animate-slide-up: slide-up 0.5s ease-out;
  --animate-pulse-glow: pulse-glow 2s ease-in-out infinite;
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-float: float 6s ease-in-out infinite;
  --animate-glitch: glitch 0.4s ease-out;
  --animate-breathing-glow: breathing-glow 4s ease-in-out infinite;
  --animate-particle-flow: particle-flow 1.5s linear infinite;

  @keyframes particle-flow {
    0% { transform: translateX(0); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateX(var(--flow-distance, 100px)); opacity: 0; }
  }

  @keyframes breathing-glow {
    0%, 100% { box-shadow: inset 0 0 20px rgba(0,229,255,0.03); }
    50% { box-shadow: inset 0 0 40px rgba(0,229,255,0.08); }
  }

  @keyframes breathing-glow-purple {
    0%, 100% { box-shadow: inset 0 0 20px rgba(110,24,179,0.03); }
    50% { box-shadow: inset 0 0 40px rgba(110,24,179,0.08); }
  }

  @keyframes cursor-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes pulse-glow {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  @keyframes accordion-down {
    from { height: 0; }
    to { height: var(--radix-accordion-content-height); }
  }

  @keyframes accordion-up {
    from { height: var(--radix-accordion-content-height); }
    to { height: 0; }
  }

  @keyframes shimmer {
    from { background-position: 0 0; }
    to { background-position: -200% 0; }
  }

  @keyframes glitch {
    0% { transform: translateX(0); opacity: 1; }
    15% { transform: translateX(-2px); opacity: 0.85; }
    30% { transform: translateX(2px); opacity: 0.9; }
    45% { transform: translateX(-1px); opacity: 0.95; }
    60% { transform: translateX(1px); }
    100% { transform: translateX(0); opacity: 1; }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  /* Confidence success glow — pulses box-shadow only, not element opacity */
  --animate-success-glow-pulse: success-glow-pulse 3s ease-in-out infinite;

  @keyframes success-glow-pulse {
    0%, 100% { box-shadow: 0 0 15px rgba(0,255,136,0.12); }
    50% { box-shadow: 0 0 30px rgba(0,255,136,0.35); }
  }

  /* Antigravity hero: industrial "lock into place" settle */
  --animate-antigravity-settle: antigravity-settle 0.5s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;

  @keyframes antigravity-settle {
    0% { opacity: 0; transform: translateY(-24px) scale(0.98); }
    70% { opacity: 1; transform: translateY(2px) scale(1); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }

  /* ── Cinematic Section Keyframes ──────────────────────────────────────── */

  /* Blinking terminal cursor */
  --animate-blink: blink 1.2s step-end infinite;

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Breathing glow (purple variant) — keyframe defined above */
  --animate-breathing-glow-purple: breathing-glow-purple 4s ease-in-out infinite;

  /* Orbit ring — rotating border highlight */
  --animate-orbit: orbit 3s linear infinite;

  @keyframes orbit {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Dash flow — animated SVG stroke offset */
  --animate-dash-flow: dash-flow 2s linear infinite;

  @keyframes dash-flow {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: -20; }
  }

  /* Shimmer overlay for bars and lines */
  --animate-shimmer-bar: shimmer-bar 2.5s ease-in-out infinite;

  @keyframes shimmer-bar {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* Pulse ring — expanding ring around icons */
  --animate-pulse-ring: pulse-ring 2.5s ease-out infinite;

  @keyframes pulse-ring {
    0% { transform: scale(1); opacity: 0.4; }
    100% { transform: scale(1.5); opacity: 0; }
  }

  /* Vertical particle flow — for backbone lines */
  --animate-particle-down: particle-down 3s linear infinite;

  @keyframes particle-down {
    0% { transform: translateY(-10px); opacity: 0; }
    15% { opacity: 1; }
    85% { opacity: 1; }
    100% { transform: translateY(var(--flow-distance-y, 60px)); opacity: 0; }
  }

  /* Pipeline celebration */
  --animate-celebration-pop: celebration-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;

  @keyframes celebration-pop {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes celebration-particle {
    0% { transform: translate(0, 0) scale(1); opacity: 0.7; }
    100% { transform: translate(var(--particle-x, 40px), var(--particle-y, -40px)) scale(0); opacity: 0; }
  }
}

/* =============================================================================
   Base Styles
   ============================================================================= */

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border);
  }

  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
  }

  body {
    font-family: var(--font-sans);
    background-color: var(--color-void-black);
    color: var(--color-cloud-white);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11"; /* Enterprise Inter settings */
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-grotesk);
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.02em;
  }

  code, pre {
    font-family: var(--font-mono);
  }

  ::selection {
    background: rgba(0, 229, 255, 0.3);
    color: var(--color-cloud-white);
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* =============================================================================
   Gradient & Glass Utilities
   ============================================================================= */

@layer utilities {
  /* Brand gradients */
  .bg-rail-fade {
    background: linear-gradient(135deg, #8134CE 0%, #6E18B3 100%);
  }

  /* bg-automation-flow removed: violates Bicameral Color Rule (no cyan-to-purple blending) */

  .bg-infra-depth {
    background: linear-gradient(180deg, #0A0A0F 0%, #0A0A0F 100%);
  }

  /* Text gradient */
  .text-gradient {
    background: linear-gradient(135deg, #8134CE 0%, #6E18B3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Border gradient */
  .border-gradient {
    position: relative;
    background: var(--color-void-black);
    border-radius: var(--radius-xl);
  }

  .border-gradient::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: calc(var(--radius-xl) + 1px);
    background: linear-gradient(135deg, rgba(129, 52, 206, 0.5), rgba(110, 24, 179, 0.5));
    z-index: -1;
  }

  /* Glow effects (rail purple) */
  .glow-purple {
    box-shadow: 0 0 20px rgba(110, 24, 179, 0.2);
  }

  .glow-purple-strong {
    box-shadow: 0 0 40px rgba(110, 24, 179, 0.3);
  }

  /* Hover shadow glows for stat cards (kap10 = cyan, platform = purple) */
  .shadow-glow-purple {
    box-shadow: 0 0 20px rgba(110, 24, 179, 0.2);
  }

  .shadow-glow-cyan {
    box-shadow: 0 0 20px rgba(0, 229, 255, 0.2);
  }

  /* Confidence / framing glows (see docs/brand/brand.md §6.1) */
  .glow-yellow {
    box-shadow: 0 0 15px rgba(255, 184, 0, 0.15);
    border: 1px solid rgba(255, 184, 0, 0.3);
  }

  .glow-cyan {
    box-shadow: 0 0 20px rgba(0, 229, 255, 0.2);
    border: 1px solid rgba(0, 229, 255, 0.4);
  }

  .glow-success-pulse {
    border: 1px solid rgba(0, 255, 136, 0.4);
    animation: success-glow-pulse 3s ease-in-out infinite;
  }

  /* Industrial Glass — Hard Glass material (brand.md §9) */
  .glass-panel {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .glass-card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease-in-out;
  }

  .glass-card:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.15);
  }

  /* Pipeline celebration */
  .celebration-pop {
    animation: celebration-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
  }

  .celebration-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--color-emerald-500, #10b981);
    animation: celebration-particle 1.2s ease-out both;
    pointer-events: none;
  }

  .celebration-particle-1 {
    top: 20%;
    left: 30%;
    --particle-x: -30px;
    --particle-y: -30px;
    animation-delay: 0.1s;
  }

  .celebration-particle-2 {
    top: 20%;
    right: 30%;
    --particle-x: 30px;
    --particle-y: -25px;
    animation-delay: 0.2s;
    background: var(--color-electric-cyan);
  }

  .celebration-particle-3 {
    top: 50%;
    left: 50%;
    --particle-x: 0px;
    --particle-y: -40px;
    animation-delay: 0.3s;
    background: var(--color-rail-purple);
  }

  /* Scrollbar */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Font utilities (enterprise typography — see docs/brand/brand.md §6) */
  .font-grotesk {
    font-family: var(--font-grotesk);
  }

  .font-mono {
    font-family: var(--font-mono);
  }

  /* Display levels (Space Grotesk, Industrial Terminal Aesthetic) */
  .text-display-xl {
    font-family: var(--font-grotesk);
    font-size: 3rem;
    line-height: 1;
    font-weight: 700;
    letter-spacing: -0.04em;
  }

  @media (min-width: 768px) {
    .text-display-xl {
      font-size: 4.5rem;
    }
  }

  .text-display-lg {
    font-family: var(--font-grotesk);
    font-size: 2.25rem;
    line-height: 1.1;
    font-weight: 700;
    letter-spacing: -0.03em;
  }

  @media (min-width: 768px) {
    .text-display-lg {
      font-size: 3.5rem;
    }
  }

  .text-display-m {
    font-family: var(--font-grotesk);
    font-size: 1.875rem;
    line-height: 1.15;
    font-weight: 600;
    letter-spacing: -0.02em;
  }

  @media (min-width: 768px) {
    .text-display-m {
      font-size: 3rem;
    }
  }

  /* Terminal / Industrial text glow */
  .text-glow-cyan {
    color: var(--color-electric-cyan);
    text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
  }

  .text-glow-purple {
    color: var(--color-quantum-violet);
    text-shadow: 0 0 12px rgba(129, 52, 206, 0.4);
  }

  /* Industrial / HUD utilities (see docs/brand/brand.md §9) */
  .bg-grid-pattern {
    background-size: 40px 40px;
    background-image:
      linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
  }

  .border-hud {
    border: 1px solid rgba(250, 250, 250, 0.1);
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.5);
  }

  .text-terminal {
    font-family: var(--font-mono);
    color: var(--color-electric-cyan);
    filter: drop-shadow(0 0 5px rgba(0, 229, 255, 0.5));
  }

  .text-legacy {
    font-family: var(--font-mono);
    color: var(--color-muted-foreground);
    text-decoration-line: line-through;
    opacity: 0.5;
  }

  .text-label {
    font-family: var(--font-grotesk);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: rgba(255, 255, 255, 0.4);
  }

  /* Red glow effects (self-heal / error) */
  .glow-red {
    box-shadow: 0 0 20px rgba(255, 51, 102, 0.2);
  }

  .glow-red-strong {
    box-shadow: 0 0 40px rgba(255, 51, 102, 0.3);
  }

  /* Glass Brain success glow */
  .glow-success {
    box-shadow: 0 0 30px rgba(0,255,136,0.2);
  }

  .glow-success-strong {
    box-shadow: 0 0 60px rgba(0,255,136,0.3);
  }

  /* ── Cinematic Section Utilities ──────────────────────────────────────── */

  /* Terminal window header bar (3 traffic-light dots) */
  .terminal-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 14px;
    background: rgba(255, 255, 255, 0.02);
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  }

  .terminal-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  /* Blinking cursor */
  .cursor-blink::after {
    content: '▊';
    animation: cursor-blink 1.2s step-end infinite;
    color: var(--color-electric-cyan);
    opacity: 0.7;
    margin-left: 2px;
  }

  .cursor-blink-purple::after {
    content: '▊';
    animation: cursor-blink 1.2s step-end infinite;
    color: var(--color-rail-purple);
    opacity: 0.7;
    margin-left: 2px;
  }

  /* Section divider with shimmer */
  .divider-shimmer {
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255,255,255,0.06) 20%,
      rgba(255,255,255,0.15) 50%,
      rgba(255,255,255,0.06) 80%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 3s ease-in-out infinite;
  }

  /* Active glow borders for scroll-driven states */
  .glow-border-cyan {
    box-shadow:
      -2px 0 12px rgba(0,229,255,0.2),
      inset -2px 0 12px rgba(0,229,255,0.05);
  }

  .glow-border-purple {
    box-shadow:
      -2px 0 12px rgba(110,24,179,0.2),
      inset -2px 0 12px rgba(110,24,179,0.05);
  }

  /* Scan line overlay — very subtle horizontal lines */
  .scan-lines {
    position: relative;
  }

  .scan-lines::after {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 2px,
      rgba(255,255,255,0.006) 2px,
      rgba(255,255,255,0.006) 4px
    );
    pointer-events: none;
    z-index: 1;
    border-radius: inherit;
  }
}
